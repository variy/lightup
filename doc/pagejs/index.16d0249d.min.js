webpackJsonp([0],[,,function(t,e){t.exports=function(t,e,i,n){var s,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(s=t,o=t.default);var r="function"==typeof o?o.options:o;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),i&&(r._scopeId=i),n){var c=r.computed||(r.computed={});Object.keys(n).forEach(function(t){var e=n[t];c[t]=function(){return e}})}return{esModule:s,exports:o,options:r}}},,,function(t,e,i){var n=i(2)(i(7),i(14),null,null);n.options.__file="D:\\code\\github\\lightup\\src\\components\\stage.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] stage.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},function(t,e,i){(function(e){t.exports={props:{sign:{type:String,required:!0},rotate:{type:Number,required:!0},lighted:{type:Boolean},index:{type:Number}},data:function(){return{hasLight:"A"===this.sign[0],hasBattery:"B"===this.sign[0],topLine:"1"===this.sign[1],rightLine:"1"===this.sign[2],bottomLine:"1"===this.sign[3],leftLine:"1"===this.sign[4],rotation:"rotate3d(0,0,0)"}},methods:{roll:function(){e.eventHub.$emit("rollGrid",{index:this.index})},parseData:function(){this.hasLight="A"===this.sign[0],this.hasBattery="B"===this.sign[0],this.topLine="1"===this.sign[1],this.rightLine="1"===this.sign[2],this.bottomLine="1"===this.sign[3],this.leftLine="1"===this.sign[4]}},watch:{sign:function(){this.parseData()},rotate:function(){this.rotation="rotateZ("+90*this.rotate+"deg)"}}}}).call(e,i(1))},function(t,e,i){(function(e,n){var s=i(13),o=i(8),a=i(9);t.exports={data:function(){this.level=Number(sessionStorage.LEVEL||"0");var t=o[this.level],e=t.data.slice();return this.originData=t.data.slice(),{level:this.level,col:t.col,time:t.time,timeout:t.timeout,mapData:e,batteryIndex:a.getBatteryIndex(t.data),lightCount:a.getLightLen(t.data),lightIndexs:a.getLightIndexs(t.data),isInSuccess:!1}},components:{grid:s},created:function(){var t=this;e.eventHub.$on("rollGrid",function(e){t.rollGrid(e.index)}),this.parseLighted(),this.countdown()},methods:{goNextLevel:function(){this.level++,sessionStorage.LEVEL=this.level,this.isInSuccess=!1},resetLevelData:function(){this.mapData=this.originData.slice()},switchVoice:function(){},countdown:function(){var t=this;this.timer=setInterval(function(){t.timeout||t.isInSuccess||--t.time<=0&&(t.timeout=!0)},1e3)},judgeSuccess:function(){for(var t=!0,e=0,i=this.lightIndexs.length;e<i;e++){var n=this.lightIndexs[e];this.mapData[n].lighted||(t=!1,e=i)}return t},rollGrid:function(t){var e=++this.mapData[t].rotate,i=this.mapData[t].sign,s=a.signTurn(i,e);n.set(this.mapData,t,{lighted:!1,rotate:e,sign:i,turnSign:s}),this.parseLighted()},resetLevel:function(){},parseLighted:function(){var t=this,e=a.getConnectedLines(this.mapData,this.col,this.batteryIndex),i={};this.mapData.forEach(function(t,n){e.indexOf(n)>-1?t.lighted||(i[n]={lighted:!0,turnSign:t.turnSign,sign:t.sign,rotate:t.rotate}):t.lighted&&(i[n]={lighted:!1,turnSign:t.turnSign,sign:t.sign,rotate:t.rotate})});for(var s in i)n.set(t.mapData,s,i[s]);this.judgeSuccess()&&(this.isInSuccess=!0)}},watch:{level:function(){var t=this,e=a.deepCopyOfObjarr(o[this.level].data);this.col=o[this.level].col,this.time=o[this.level].time,this.lightCount=a.getLightLen(e),this.batteryIndex=a.getBatteryIndex(e),e.forEach(function(e,i){n.set(t.mapData,i,e)}),this.lightIndexs=a.getLightIndexs(t.mapData),setTimeout(function(){t.parseLighted()},300)},timeout:function(){var t=this;t.timeout&&confirm("时间用完了")&&(t.mapData=t.originData.slice(),t.time=10,t.timeout=!1)}}}}).call(e,i(1),i(0))},function(t,e){for(var i=[{col:4,time:10,data:["01100","A0010","00011","A0010","01010","A0001","01010","A0010","01010","00101","00101","00101","B1010","01010","00101","01010","01100","01101","01011","01100"]},{col:4,time:50,data:["A0010","00111","01010","A0001","A0100","00101","A0010","A0001","01100","01101","00101","00101","01100","01011","01010","01010","A1000","B1001","01101","01100"]},{col:4,time:40,data:["","B0100","01110","00011","01100","01101","00110","01010","A0100","01010","A0010","00111","A0010","01001","A0001","01010","A0001","00101","01110","00110"]},{col:4,time:30,data:["A0010","01101","01010","A1000","00011","01011","01010","A0010","01110","00101","00111","A0100","01100","B1000","00111","00110","A1000","00101","01001","A0001"]},{col:4,time:30,data:["A0100","01100","A0100","A0100","A0001","01011","01011","00111","01001","01011","A0100","A0010","A1000","B1011","01110","A0001","A0001","01110","01110","A0010"]}],n=[],s=0,o=i.length;s<o;s++){var a={data:[]};a.col=i[s].col,a.time=i[s].time,a.timeout=!1;for(var r=i[s].data,c=0,l=r.length;c<l;c++)a.data.push({sign:r[c],rotate:0,turnSign:r[c],lighted:!1});n.push(a)}t.exports=n},function(t,e){var i={1:"3",3:"1",2:"4",4:"2"},n={1:"4","-1":"2",4:"1","-4":"3"};t.exports={deepCopyOfObjarr:function(t){var e=[];return t.forEach(function(t){e.push(Zepto.extend({},t))}),e},signTurn:function(t,e){for(var i=t.slice(1),n=i.length,s=e%n,o=0;o<s;)i=i.slice(-1)+i.slice(0,-1),o++;return t[0]+i},getBatteryIndex:function(t){for(var e=0,i=t.length;e<i;e++)if("B"===t[e].sign[0])return e;throw Error("can't find battery's index")},getLightIndexs:function(t){var e=[];return t.forEach(function(t,i){"A"===t.sign[0]&&e.push(i)}),e},getLightLen:function(t){var e=0;return t.forEach(function(t){"A"===t.sign[0]&&e++}),e},isPassLevel:function(t,e){return e.forEach(function(e){t[e].lighted||(isSuccess=!1)}),!0},getConnectedLines:function(t,e,s){var o=t.length,a=function(s,a){var r=[],c=t[s].turnSign,l=-1;if(-1!==a){var u=s-a+"";l=Number(n[u])}for(var h=function(e,n){"1"===t[e].turnSign[i[n]]&&r.push(e)},d=1,f=c.length;d<f;d++)"1"===c[d]&&d!==l&&(1===d?s>=e&&h(s-e,d):2===d?(s+1)%e!=0&&h(s+1,d):3===d?s+e<o&&h(s+e,d):4===d&&s%e!=0&&h(s-1,d));return r},r=function(t,e){if(0===t.length)return e;var i=[];return t.forEach(function(t){var n=t.length,s=t[n-1],o=n>1?t[n-2]:-1,r=a(s,o);r.length>0?r.forEach(function(n){if(t.indexOf(n)>-1)e.push(t);else{var s=t.slice();s.push(n),i.push(s)}}):e.push(t)}),r(i,e)},c=r([[s]],[]);return function(t){for(var e={},i=[],n=0,s=t.length;n<s;n++)for(var o=0,a=t[n].length;o<a;o++){var r=t[n][o];r in e||(e[r]="1")}for(var c in e)i.push(Number(c));return i}(c)}}},function(t,e,i){(function(t){var e=i(5);Zepto('<div id="container"></div>').appendTo("body");new t({el:"#container",template:'<div id="1"><stage></stage></div>',components:{stage:e}})}).call(e,i(0))},,,function(t,e,i){var n=i(2)(i(6),i(15),null,null);n.options.__file="D:\\code\\github\\lightup\\src\\components\\grid.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] grid.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"container"}},[i("header",[i("div",{staticClass:"fl"},[i("span",{staticClass:"icon-pic icon-clock vertical-m"}),t._v(" "),i("span",{staticClass:"vertical-m"},[t._v(t._s(t.time))])]),t._v(" "),i("div",{staticClass:"fr"},[t._v("\n\n            第 "+t._s(t.level+1)+" 关\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isInSuccess,expression:"isInSuccess"}],staticClass:"success-tip",on:{click:t.goNextLevel}},[i("div",{staticClass:"backdrop"}),t._v(" "),i("div",{staticClass:"content"},[i("span",[t._v("恭喜过关。点击进入第"+t._s(t.level+2)+"关 >")]),t._v(" "),i("span",{staticClass:"only-vertical-align"})])])]),t._v(" "),i("section",{attrs:{id:"field"}},[i("ul",{staticClass:"grid-list",style:{width:4*t.col+"rem"}},t._l(t.mapData,function(t,e){return i("grid",{attrs:{sign:t.sign,rotate:t.rotate,lighted:t.lighted,index:e}})}))]),t._v(" "),i("footer",[i("div",{staticClass:"fl"},[i("i",{staticClass:"iconfont icon-stop"}),t._v(" \n            "),i("i",{staticClass:"iconfont icon-refresh",on:{touchstart:t.resetLevelData}})]),t._v(" "),i("div",{staticClass:"fr"},[i("i",{staticClass:"iconfont icon-voice",on:{touchstart:t.switchVoice}})])])])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{class:"grid "+(t.lighted?"lighted":""),on:{touchstart:t.roll}},[i("p",{staticClass:"line-group",style:{transform:t.rotation},attrs:{"data-rotate":t.rotate}},[t.topLine?i("i",{staticClass:"line line-top"}):t._e(),t._v(" "),t.rightLine?i("i",{staticClass:"line line-right"}):t._e(),t._v(" "),t.bottomLine?i("i",{staticClass:"line line-bottom"}):t._e(),t._v(" "),t.leftLine?i("i",{staticClass:"line line-left"}):t._e()]),t._v(" "),t.hasLight?i("span",{staticClass:"iconfont icon-light icon-light-grid"}):t._e(),t._v(" "),t.hasBattery?i("span",{staticClass:"iconfont icon-power icon-battery-grid"}):t._e(),t._v(" "),i("span",{staticClass:"line only-for-zhuang"})])},staticRenderFns:[]},t.exports.render._withStripped=!0}],[10]);